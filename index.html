<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>80 million</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: sans-serif;
        }

        #mymap {
            width: 100%;
            height: 100%;
            background-color: white;
        }
    </style>
</head>
<body>
<div id="mymap"></div>
<script>


    var roi = {"x0": -5071.627079999999, "x1": 4622.530679999998, "y0": -6427.59084, "y1": 221.184 },
        img = [262144, 179792];

    var a = img[0] / (roi.x1 - roi.x0),
        b = -img[0] / (roi.x1 - roi.x0) * roi.x0,
        c = img[1] / (roi.y1 - roi.y0),
        d = -img[1] / (roi.y1 - roi.y0) * roi.y0;

    // This transformation maps a point from the roi domain to the domain defined by [0,0] amd [img[0], img[1]].
    var t = new L.Transformation(a, b, c, d);

    // The transformation in this CRS maps the the top left corner to (0,0) and the bottom right to (256, 256)
    L.CRS.MySimple = L.extend({}, L.CRS.Simple, {
        transformation: new L.Transformation(1 / 1024, 0, 1 / 1024, 0),
    });


    var map_tiles = 'https://raw.githubusercontent.com/acycliq/VS6_MsBrain_A3_maptiles/master/maptiles/262144px/z3/{z}/{y}/{x}.jpg';

    var dapiLayer = L.tileLayer(map_tiles, {minZoom: 0, maxZoom: 8});
    var npyLayer = L.tileLayer('./src/pyramid/{z}/{y}/{x}.png', {minZoom: 0, maxZoom: 8,});

    map = L.map('mymap', {
        layers: [dapiLayer],
        crs: L.CRS.MySimple,
        attributionControl: false,
    }).setView([img[1], img[0] / 2], 2);

    var baseLayers = {
        "Dapi image": dapiLayer,
    };

    var overlayMaps = {
        "Npy": npyLayer
    };

    L.control.layers(baseLayers, overlayMaps, {collapsed: false}).addTo(map);


</script>
</body>
</html>